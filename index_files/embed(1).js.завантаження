!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="25fdc5ca-8412-41b0-93ab-2a10678a39c2",e._sentryDebugIdIdentifier="sentry-dbid-25fdc5ca-8412-41b0-93ab-2a10678a39c2")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"production_v1.7.727_1_da399d2"},(()=>{var e={3633:e=>{e.exports=function(){var e=function(e){return"function"===typeof e},t=Math.pow(2,53)-1,n=function(e){var n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(n,0),t)},i=function(e){var t=e.next();return!Boolean(t.done)&&t};return function(t){"use strict";var o,r,s,a=this,c=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof c){if(!e(c))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}var d=function(t,n){if(null!=t&&null!=n){var i=t[n];if(null==i)return;if(!e(i))throw new TypeError(i+" is not a function");return i}}(t,function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!==typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}}(t));if(void 0!==d){r=e(a)?Object(new a):[];var l,u,h=d.call(t);if(null==h)throw new TypeError("Array.from requires an array-like or iterable object");for(s=0;;){if(!(l=i(h)))return r.length=s,r;u=l.value,r[s]=c?c.call(o,u,s):u,s++}}else{var g=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var p,m=n(g.length);for(r=e(a)?Object(new a(m)):new Array(m),s=0;s<m;)p=g[s],r[s]=c?c.call(o,p,s):p,s++;r.length=m}return r}}()}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,o){if(1&o&&(i=this(i)),8&o)return i;if("object"===typeof i&&i){if(4&o&&i.__esModule)return i;if(16&o&&"function"===typeof i.then)return i}var r=Object.create(null);n.r(r);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>i[e]));return s.default=()=>i,n.d(r,s),r}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"static/js/lazy-logrocket.da21a36f.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="solve-ui:";n.l=(i,o,r,s)=>{if(e[i])e[i].push(o);else{var a,c;if(void 0!==r)for(var d=document.getElementsByTagName("script"),l=0;l<d.length;l++){var u=d[l];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+r){a=u;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+r),a.src=i),e[i]=[o];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(g);var o=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(n))),t)return t(n)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),c&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={722:0};n.f.j=(t,i)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var r=new Promise(((n,i)=>o=e[t]=[n,i]));i.push(o[2]=r);var s=n.p+n.u(t),a=new Error;n.l(s,(i=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",a.name="ChunkLoadError",a.type=r,a.request=s,o[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var o,r,s=i[0],a=i[1],c=i[2],d=0;if(s.some((t=>0!==e[t]))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(c)c(n)}for(t&&t(i);d<s.length;d++)r=s[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0},i=self.webpackChunksolve_ui=self.webpackChunksolve_ui||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e=n(3633),t=n.n(e);const i={closedWidgetDimensions:{height:"0",width:"0"},isOpen:!1,isViewingImage:!1,launchStyle:"icon",placement:"bottom_right",size:"standard"},o="forethought-chat",r=window.document.currentScript;if(!r)throw new Error("FT: Could not find embed script");const s=r.getAttribute("position"),a=r.getAttribute("position-x"),c=r.getAttribute("position-y"),d=r.getAttribute("offset-x")||"",l=r.getAttribute("offset-y")||"",u=/^[-]?\d+(px|rem)$/,h=u.test(d)?"calc(".concat(d," - 28px)"):"0",g=u.test(l)?"calc(".concat(l," - 28px)"):"0",p=()=>"left"===s||"left"===a||"bottom_left"===i.placement?"left":"right",m=()=>"left"===p()?"right":"left",f="top"===c?"top":"bottom",w="top"===f?"bottom":"top",v=()=>({border:"none",colorScheme:"normal",height:"0",maxHeight:"large"===i.size?"".concat(1248,"px"):"".concat(798,"px"),overflow:"hidden",position:"fixed",[p()]:h,[m()]:"",[f]:g,[w]:"",webkitMaskImage:"-webkit-radial-gradient(white, black)",width:"0",zIndex:"999999",..."floating_bar"===i.launchStyle?{left:"0",marginLeft:"auto",marginRight:"auto",right:"0"}:{}});function _(e,t){Object.entries({...v(),...t}).forEach((t=>{let[n,i]=t;e.style[n]=i}))}function b(e){_(e,{bottom:"0",height:"100%",left:"0",maxHeight:"initial",right:"0",top:"0",width:"100%"})}function y(e){return"null"===e?"*":e}let S=y(function(){try{var e;const t=null===(e=window.location.ancestorOrigins)||void 0===e?void 0:e[0];return t?new URL(t).origin:document.referrer?new URL(document.referrer).origin:""}catch{return""}}())||"*";const E=(e,t)=>{var n,i,o,r,s,a,c;null===(n=window.parent)||void 0===n||null===(i=n.postMessage)||void 0===i||i.call(n,e,t||S),null===(o=window)||void 0===o||null===(r=o.webkit)||void 0===r||null===(s=r.messageHandlers)||void 0===s||null===(a=s.widgetObservable)||void 0===a||null===(c=a.postMessage)||void 0===c||c.call(a,JSON.stringify(e));try{var d,l,u;null===(d=window)||void 0===d||null===(l=d.JSBridge)||void 0===l||null===(u=l.postMessage)||void 0===u||u.call(l,JSON.stringify(e))}catch{}try{var h,g,p;null===(h=window)||void 0===h||null===(g=h.ReactNativeWebView)||void 0===g||null===(p=g.postMessage)||void 0===p||p.call(g,JSON.stringify(e))}catch{}},C=e=>new Promise((t=>setTimeout(t,e)));async function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e();return n||(t>4?null:(await C(2**t*600),k(e,t+1)))}const x=window.matchMedia("(max-width: ".concat(480,"px)")),T=window.matchMedia("(max-height: ".concat(700,"px)"));function I(e){return e instanceof Error?e.message:String(e)}const A=Object.prototype.toString;function L(e,t){return A.call(e)==="[object ".concat(t,"]")}function P(e){return L(e,"Object")}function z(e){return Boolean(e&&e.then&&"function"===typeof e.then)}function R(e){return e&&e.Math==Math?e:void 0}const M="object"==typeof globalThis&&R(globalThis)||"object"==typeof window&&R(window)||"object"==typeof self&&R(self)||"object"==typeof n.g&&R(n.g)||function(){return this}()||{};function D(e,t,n){const i=n||M,o=i.__SENTRY__=i.__SENTRY__||{};return o[e]||(o[e]=t())}function O(){const e=M,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(i){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}const N=1e3;function q(){return Date.now()/N}const W=function(){const{performance:e}=M;if(!e||!e.now)return q;const t=Date.now()-e.now(),n=void 0==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/N}();let F;(()=>{const{performance:e}=M;if(!e||!e.now)return void(F="none");const t=36e5,n=e.now(),i=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-i):t,r=o<t,s=e.timing&&e.timing.navigationStart,a="number"===typeof s?Math.abs(s+n-i):t;r||a<t?o<=a?(F="timeOrigin",e.timeOrigin):F="navigationStart":F="dateNow"})();const j="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,U=["debug","info","warn","error","log","assert","trace"],B={};function H(e){if(!("console"in M))return e();const t=M.console,n={},i=Object.keys(B);i.forEach((e=>{const i=B[e];n[e]=t[e],t[e]=i}));try{return e()}finally{i.forEach((e=>{t[e]=n[e]}))}}const V=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return j?U.forEach((n=>{t[n]=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];e&&H((()=>{M.console[n]("".concat("Sentry Logger ","[").concat(n,"]:"),...i)}))}})):U.forEach((e=>{t[e]=()=>{}})),t}(),Y="production",Z="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var G;!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(G||(G={}));class J{constructor(e){J.prototype.__init.call(this),J.prototype.__init2.call(this),J.prototype.__init3.call(this),J.prototype.__init4.call(this),this._state=G.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new J(((n,i)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(o){i(o)}else n(t)},e=>{if(t)try{n(t(e))}catch(o){i(o)}else i(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new J(((t,n)=>{let i,o;return this.then((t=>{o=!1,i=t,e&&e()}),(t=>{o=!0,i=t,e&&e()})).then((()=>{o?n(i):t(i)}))}))}__init(){this._resolve=e=>{this._setResult(G.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(G.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===G.PENDING&&(z(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===G.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===G.RESOLVED&&e[1](this._value),this._state===G.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function K(){return D("globalEventProcessors",(()=>[]))}function Q(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new J(((o,r)=>{const s=e[i];if(null===t||"function"!==typeof s)o(t);else{const a=s({...t},n);Z&&s.id&&null===a&&V.log('Event processor "'.concat(s.id,'" dropped event')),z(a)?a.then((t=>Q(e,t,n,i+1).then(o))).then(null,r):Q(e,a,n,i+1).then(o).then(null,r)}}))}function $(e){return X(e,new Map)}function X(e,t){if(function(e){if(!P(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(t){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const i={};t.set(e,i);for(const o of Object.keys(e))"undefined"!==typeof e[o]&&(i[o]=X(e[o],t));return i}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const i=[];return t.set(e,i),e.forEach((e=>{i.push(X(e,t))})),i}return e}function ee(e){const t=W(),n={sid:O(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return $({sid:"".concat(e.sid),init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"===typeof e.did||"string"===typeof e.did?"".concat(e.did):void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&te(n,e),n}function te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||W(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:O()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did="".concat(t.did)),"number"===typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"===typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"===typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function ne(e){return e.transaction}const ie=1;function oe(e){const{spanId:t,traceId:n}=e.spanContext(),{data:i,op:o,parent_span_id:r,status:s,tags:a,origin:c}=re(e);return $({data:i,op:o,parent_span_id:r,span_id:t,status:s,tags:a,trace_id:n,origin:c})}function re(e){return function(e){return"function"===typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"===typeof e.toJSON?e.toJSON():{}}function se(e){const{traceFlags:t}=e.spanContext();return Boolean(t&ie)}function ae(e){const t=ke();if(!t)return{};const n=function(e,t,n){const i=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:r}=n&&n.getUser()||{},s=$({environment:i.environment||Y,release:i.release,user_segment:r,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",s),s}(re(e).trace_id||"",t,xe()),i=ne(e);if(!i)return n;const o=i&&i._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:r,source:s}=i.metadata;null!=r&&(n.sample_rate="".concat(r));const a=re(i);return s&&"url"!==s&&(n.transaction=a.description),n.sampled=String(se(i)),t.emit&&t.emit("createDsc",n),n}function ce(e,t){const{fingerprint:n,span:i,breadcrumbs:o,sdkProcessingMetadata:r}=t;!function(e,t){const{extra:n,tags:i,user:o,contexts:r,level:s,transactionName:a}=t,c=$(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const d=$(i);d&&Object.keys(d).length&&(e.tags={...d,...e.tags});const l=$(o);l&&Object.keys(l).length&&(e.user={...l,...e.user});const u=$(r);u&&Object.keys(u).length&&(e.contexts={...u,...e.contexts});s&&(e.level=s);a&&(e.transaction=a)}(e,t),i&&function(e,t){e.contexts={trace:oe(t),...e.contexts};const n=ne(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:ae(t),...e.sdkProcessingMetadata};const i=re(n).description;i&&(e.tags={transaction:i,...e.tags})}}(e,i),function(e,t){e.fingerprint=e.fingerprint?function(e){return Array.isArray(e)?e:[e]}(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,r)}class de{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=le()}static clone(e){return e?e.clone():new de}clone(){const e=new de;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&te(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"===typeof e?e(this):e;if(t instanceof de){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(P(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=le(),this}addBreadcrumb(e,t){const n="number"===typeof t?t:100;if(n<=0)return this;const i={timestamp:q(),...e},o=this._breadcrumbs;return o.push(i),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:i,_extra:o,_user:r,_level:s,_fingerprint:a,_eventProcessors:c,_propagationContext:d,_sdkProcessingMetadata:l,_transactionName:u,_span:h}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:i,extra:o,user:r,level:s,fingerprint:a||[],eventProcessors:c,propagationContext:d,sdkProcessingMetadata:l,transactionName:u,span:h}}applyToEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];ce(e,this.getScopeData());return Q([...n,...K(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:O();if(!this._client)return V.warn("No client configured on scope - will not capture exception!"),n;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...t,event_id:n},this),n}captureMessage(e,t,n){const i=n&&n.event_id?n.event_id:O();if(!this._client)return V.warn("No client configured on scope - will not capture message!"),i;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:i},this),i}captureEvent(e,t){const n=t&&t.event_id?t.event_id:O();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(V.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function le(){return{traceId:O(),spanId:O().substring(16)}}const ue=parseFloat("7.120.3"),he=100;class ge{constructor(e,t,n){let i,o,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ue;this._version=r,t?i=t:(i=new de,i.setClient(e)),n?o=n:(o=new de,o.setClient(e)),this._stack=[{scope:i}],e&&this.bindClient(e),this._isolationScope=o}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(i){throw this.popScope(),i}return z(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:O(),i=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:i,...t,event_id:n}),n}captureMessage(e,t,n){const i=this._lastEventId=n&&n.event_id?n.event_id:O(),o=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:i}),i}captureEvent(e,t){const n=t&&t.event_id?t.event_id:O();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:r=he}=i.getOptions&&i.getOptions()||{};if(r<=0)return;const s={timestamp:q(),...e},a=o?H((()=>o(s,t))):s;null!==a&&(i.emit&&i.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,r))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=me(this);try{e(this)}finally{me(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(n){return Z&&V.warn("Cannot retrieve integration ".concat(e.id," from the current Hub")),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(Z&&!n){this.getClient()?V.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):V.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),te(e,n)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:i,environment:o=Y}=n&&n.getOptions()||{},{userAgent:r}=M.navigator||{},s=ee({release:i,environment:o,user:t.getUser(),...r&&{userAgent:r},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&te(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e){const t=pe().__SENTRY__;if(t&&t.extensions&&"function"===typeof t.extensions[e]){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t.extensions[e].apply(this,i)}Z&&V.warn("Extension method ".concat(e," couldn't be found, doing nothing."))}}function pe(){return M.__SENTRY__=M.__SENTRY__||{extensions:{},hub:void 0},M}function me(e){const t=pe(),n=_e(t);return be(t,e),n}function fe(){const e=pe();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return we(e)}function we(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe();return ve(e)&&!_e(e).isOlderThan(ue)||be(e,new ge),_e(e)}function ve(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function _e(e){return D("hub",(()=>new ge),e)}function be(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}new WeakMap;function ye(e){if(e)return function(e){return e instanceof de||"function"===typeof e}(e)||function(e){return Object.keys(e).some((e=>Se.includes(e)))}(e)?{captureContext:e}:e}const Se=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Ee(e,t){return fe().captureException(e,ye(t))}function Ce(e,t){return fe().startTransaction({...e},t)}function ke(){return fe().getClient()}function xe(){return fe().getScope()}var Te;function Ie(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}!function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(Te||(Te={}));const Ae=Ie;const Le={isLoading:!1,originalLogRocket:void 0,originalLogRocketMiddleware:void 0,reduxMiddlewareOptions:void 0},Pe="Must call LogRocket.init() before sessionURL becomes available.";async function ze(){for(;Le.isLoading;)await new Promise((e=>{setTimeout(e,100)}))}const Re=e=>t=>n=>{if(n)return Le.originalLogRocketMiddleware?Le.originalLogRocketMiddleware(e)(t)(n):t(n)},Me={async getSessionURL(e){await ze(),Le.originalLogRocket?Le.originalLogRocket.getSessionURL(e):e(Pe)},async identify(e,t){if(await ze(),Le.originalLogRocket){if("string"===typeof e)return void Le.originalLogRocket.identify(e,t);Le.originalLogRocket.identify(e)}},async init(){Le.isLoading=!0,Le.originalLogRocket=(await n.e(412).then(n.t.bind(n,6987,23))).default,Le.isLoading=!1,Le.originalLogRocketMiddleware=Le.originalLogRocket.reduxMiddleware(Le.reduxMiddlewareOptions),Le.originalLogRocket.init(...arguments)},reduxMiddleware:e=>(Le.reduxMiddlewareOptions=e,Re),get sessionURL(){return Le.originalLogRocket?Le.originalLogRocket.sessionURL:Pe}};class De extends Error{constructor(e,t){var n;let{data:i,method:o,response:r,status:s,url:a}=t;super(e),this.status=void 0,this.response=void 0,this.data=void 0,this.method=void 0,this.url=void 0,Object.setPrototypeOf(this,De.prototype),this.status=null!==(n=null!==s&&void 0!==s?s:null===r||void 0===r?void 0:r.status)&&void 0!==n?n:0,this.response=r,this.data=i,this.method=o,this.url=a}}const Oe={"restart-conversation":{method:"put",url:"/workflow/conversation/{conversationId}/restart"},"tracking-events":{method:"post",url:"/workflow/tracking-event"},"upload-file":{method:"post",url:"/workflow/upload-file"},"widget-config":{method:"post",url:"/workflow/widget-config"}},Ne="workflow/v2",qe={"continue-autoflow-intent":{method:"post",url:"/".concat(Ne,"/conversation/{conversationId}/continue-autoflow-intent")},"get-translated-csat-text":{method:"get",url:"/".concat(Ne,"/conversation/{conversationId}/csat-text")},"get-widget-components":{method:"get",url:"/".concat(Ne,"/conversation/{conversationId}/widget-components")},"init-intent-conversation":{method:"post",url:"/".concat(Ne,"/conversation")},"interactive-email-deflection-feedback":{method:"post",url:"/".concat(Ne,"/interactive-email-conversation/{conversationId}/deflection-feedback")},"restart-intent-conversation":{method:"put",url:"/".concat(Ne,"/conversation/{conversationId}/restart")},"send-conversation-alert":{method:"post",url:"/".concat(Ne,"/conversation/{conversationId}/alert")},"send-conversation-feedback":{method:"put",url:"/".concat(Ne,"/conversation/{conversationId}/feedback")},"send-free-form-query":{method:"put",url:"/".concat(Ne,"/conversation/{conversationId}/free-form-query")},"submit-intent-csat":{method:"post",url:"/".concat(Ne,"/conversation/{conversationId}/csat")},"update-helpdesk-conversation":{method:"post",url:"/".concat(Ne,"/conversation/{conversationId}/update-helpdesk-conversation")},"update-intent-conversation":{method:"put",url:"/".concat(Ne,"/conversation/{conversationId}")}},We="workflow/v3",Fe={"autonomous-agent-query":{method:"put",url:"/".concat(We,"/conversation/{conversationId}/free-form-query")},"init-autonomous-agent-conversation":{method:"post",url:"/".concat(We,"/conversation")}},je="https://solve-api.forethought.ai/solve".replace(/\/solve$/,"");function Ue(e,t){return async function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,o]=t,r=i instanceof Request?i.url:String(i),s=(null===o||void 0===o?void 0:o.method)||"get";let a;try{a=await fetch(...t)}catch(c){if(c instanceof Error)throw new De(c.message,{data:null,method:s,response:void 0,url:r});throw c}if(!a.ok){const e=a.headers.get("content-type");if(null!==e&&void 0!==e&&e.includes("application/json")){const e=await a.json();if("object"===typeof(c=e)&&null!==c&&"message"in c&&"string"===typeof c.message)throw new De(e.message,{data:e,method:s,response:a,status:e.status,url:a.url});if(function(e){return"object"===typeof e&&null!==e&&"detail"in e&&"string"===typeof e.detail}(e))throw new De("FastAPI error: ".concat(e.detail),{data:e,method:s,response:a,url:a.url});throw new De("Unrecognizable JSON response",{data:e,method:s,response:a,url:a.url})}const t=await a.text();if(null!==e&&void 0!==e&&e.includes("text/plain"))throw new De(t,{data:t,method:s,response:a,url:a.url});throw new De("Non-JSON response: ".concat(e),{data:t,method:s,response:a,url:a.url})}var c;try{return await a.json()}catch(c){return{}}}(je+e,{...t,...null!==t&&void 0!==t&&t.data?{body:JSON.stringify(t.data)}:{},headers:{"Content-Type":"application/json",...null===t||void 0===t?void 0:t.headers}})}var Be=function(e,t){for(var n={},i=Object.keys(e),o=i.length,r=0;r<o;r++){var s=i[r];n[s]=t(e[s],s,e)}return n};const He="/live-chat",Ve={"delete-forethought-live-chat":{method:"delete",url:"".concat(He,"/conversation/{conversationId}")},"live-chat-resolve-conversation":{method:"put",url:"".concat(He,"/conversation/{conversationId}/helpdesk-conversation/{helpdeskConversationId}/resolve")},"live-chat-send-agent-message":{method:"post",url:"".concat(He,"/conversation/{conversationId}/helpdesk-conversation/{helpdeskConversationId}/agent/message")},"live-chat-send-message":{method:"post",url:"".concat(He,"/conversation/{conversationId}/helpdesk-conversation/{helpdeskConversationId}/message")},"update-forethought-live-chat-helpdesk-conversation-id":{method:"put",url:"".concat(He,"/conversation/{conversationId}/helpdesk-conversation-id")}};class Ye{constructor(){return this.instance=null,this.fetch=Ue,this.headers={Authorization:"","is-config-preview":!1,"is-draft":!0,"is-preview":!1,"solve-origin":""},this.sentryTags=[],this.routes={...Oe,...qe,...Fe,...Ve},this.tokenizeUrl=(e,t)=>{let n=e;return null!==t&&Object.entries(t).forEach((e=>{let[t,i]=e;if(1===n.split("{".concat(t,"}")).length)throw new Error("Cannot tokenize. Url param ".concat(t," does not exit"));n=n.split("{".concat(t,"}")).join(i)})),n},null===this.instance&&(this.instance=this),this.instance}init(e){let{apiKey:t,isBuilderPreview:n,isDraft:i,isInteractiveEmailPreview:o,isSolveConfigPreview:r,origin:s,workflowVersion:a}=e;this.headers=((e,t,n,i,o,r,s)=>{const a=n&&!o||s||i;let c={Authorization:"Bearer ".concat(e),"is-config-preview":i,"is-draft":a&&r,"is-preview":a,"solve-origin":t};return n&&o&&(c={...c,"workflow-config-version":o}),c})(t,s,n,r,a,i,o)}async request(e,t){let{data:n=null,headers:i,urlValues:o=null}=t;this.sentryTags=await(async()=>[])();const{method:r,url:s}=this.routes[e];try{return await this.fetch(this.tokenizeUrl(s,o),{data:n,headers:Be({...this.headers,...i},String),method:r})}catch(a){this.handleError({error:a,requestData:n,serviceName:e})}}handleError(e){let{error:t,requestData:n,serviceName:i}=e;if(t instanceof De&&((e=>{let{errorMessage:t,origin:n,requestData:i,responseData:o,tags:r}=e;const s=xe();null===r||void 0===r||r.forEach((e=>{let{key:t,value:n}=e;return s.setTag(t,n)})),s.setContext("context",{errorMessage:t,logRocketSessionUrl:Me.sessionURL,requestData:i,responseData:o,"solve-origin":n})})({errorMessage:t.message,origin:this.headers["solve-origin"],requestData:n,responseData:t.data,tags:[...this.sentryTags,{key:"responseStatus",value:t.status}]}),Ee(t)),"widget-config"===i)E({error:"Invalid configuration. Please verify API key is correct and all necessary context variables are defined.",event:"forethoughtWidgetError"});throw t}}const Ze=new class extends Ye{constructor(){super(...arguments),this.isTracingEnabled=!1,this.traceId=void 0}async request(e,t){if(!this.isTracingEnabled)return super.request(e,t);const{method:n,url:i}=this.routes[e];let o;this.traceId?o=Ce({name:i,traceId:this.traceId}):(o=Ce({name:i}),this.traceId=o.traceId),fe().configureScope((e=>e.setSpan(o)));const r=o.startChild({description:n+" "+i,op:"http"}),s={...t,headers:{...t.headers,"custom-sentry-trace":this.traceId}};var a,c;a="trace_id",c=this.traceId,fe().setTag(a,c);try{const t=await super.request(e,s);return r.setStatus("ok"),t}catch(d){throw d instanceof De?r.setStatus(Ae(d.status)):r.setStatus("unknown_error"),d}finally{r.finish(),o.finish()}}};function Ge(e){let{additionalContext:t={},additionalTags:n={},consoleError:i=!1,conversationId:o,error:r}=e;const s=xe();s.setTags({...n,conversationId:o,"solve-origin":Ze.headers["solve-origin"]}),s.setContext("context",{...t,conversationId:o,"solve-origin":Ze.headers["solve-origin"]}),r instanceof Error?Ee(r):Ee(new Error("".concat(r))),i&&console.error(r)}const Je=window.document,Ke=Je.currentScript,Qe="true"===(null===Ke||void 0===Ke?void 0:Ke.getAttribute("hide-ft-after-zd")),$e=null===Ke||void 0===Ke?void 0:Ke.getAttribute("nonce"),Xe="false"!==(null===Ke||void 0===Ke?void 0:Ke.getAttribute("auto-open-zd")),et=null===Ke||void 0===Ke?void 0:Ke.getAttribute("hide-intercom-widget");let tt="",nt=!1;const it=()=>{const e=Je.getElementById(o),t=null===Ke||void 0===Ke?void 0:Ke.getAttribute("src"),n=t?y(new URL(t).origin):"*",i=t=>{const i=e||Je.getElementById(o);var r;i?null===(r=i.contentWindow)||void 0===r||r.postMessage(t,n):Ge({consoleError:!0,error:"Forethought iframe not found -- cannot postMessage to it"})},r=function(e,t){i({event:"updateHelpdeskConversation",forethoughtConversationID:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,helpdeskConversationId:t,includeAttachments:arguments.length>3&&void 0!==arguments[3]&&arguments[3],includeTranscript:!(arguments.length>4&&void 0!==arguments[4])||arguments[4],integration:e})};function s(e){const t=Je.createElement("style");return t.id=e,$e&&(t.nonce=$e),t}const a=s("ft-salesforce-style"),c=()=>{a.innerHTML="",Je.body.appendChild(a)},d=()=>{a.innerHTML=".embeddedServiceHelpButton { display: none !important;}",Je.body.appendChild(a)},l=()=>{let e=!0,t=0;const n=()=>{if(e&&t<=10){e=!1;const i=Je.getElementsByClassName("chasitorText")[0];i?(i.value=tt,function(e,t,n){if("createEvent"in Je){const i=Je.createEvent("HTMLEvents");i.keyCode=n,i.initEvent(t,!1,!0),e.dispatchEvent(i)}}(i,"keydown",13)):(e=!0,t++,setTimeout(n,1e3))}};n()},u=()=>{d(),window.Forethought("widget","show")};window.embedded_svc&&(window.embedded_svc.addEventHandler("afterDestroy",u),nt=!0);const h=s("ft-zd-style"),g=()=>{try{window.zE&&window.zE("webWidget","hide")}catch{}try{window.zE&&window.zE("messenger","hide")}catch{}h.innerHTML='\n      iframe[id="launcher"] { display: none !important;}\n      iframe[title="Button to launch messaging window"] { display: none !important;}\n      iframe[title="Button to launch messaging window, conversation in progress"] { display: none !important;}\n      iframe[title="Message from company"] { display: none !important;}\n      iframe[data-product="web_widget"] { display: none !important ;}\n      ',Je.body.appendChild(h)},p=()=>{try{window.zE&&window.zE("webWidget","show")}catch{}try{window.zE&&window.zE("messenger","show")}catch{}h.innerHTML='\n      iframe[id="launcher"] { display: block !important;}\n      iframe[title="Button to launch messaging window"] { display: block !important;}\n      iframe[title="Button to launch messaging window, conversation in progress"] { display: block !important;}\n      iframe[title="Message from company"] { display: block !important;}\n      iframe[data-product="web_widget"] { display: block !important;}\n    ',Je.body.appendChild(h)},m=()=>{if(!window.zE)return i({event:"noZendeskObjectDetected"}),[];try{return window.zE("webWidget:get","chat:departments")||[]}catch{return[]}},f=e=>{if(!e)return;let t=!1;try{t=e("webWidget:get","chat:isChatting")}catch{}return"boolean"===typeof t&&(((e,t)=>{try{t?(p(),Xe&&e("webWidget","open"),window.Forethought("widget","hide")):g(),e("webWidget:on","chat:end",(function(){e&&(window.Forethought("widget","close"),Qe||(e("webWidget","close"),g(),window.Forethought("widget","show")))}))}catch{return}})(e,t),!0)},w=()=>{if(!window.zE)return i({event:"noZendeskObjectDetected"}),!1;try{const e=window.zE("webWidget:get","chat:isChatting");return"boolean"===typeof e&&e}catch{return!1}},v=s("ft-kustomer-style"),_=s("ft-intercom-style"),b=e=>{let{autoSendConfig:t,email:n,identityVerificationEnabled:i,isCurrentTabPrimary:o,name:r,question:s,userid:a}=e;const c={...window.intercomSettings};i||(r&&(c.name=r),a&&(c.user_id=a),n&&(c.email=n)),window.Intercom("update",c),_.innerHTML="",Je.body.appendChild(_),s&&o?(window.Intercom("showSpace","messages"),setTimeout((()=>{window.Intercom("showNewMessage",s)}),1),t&&t.should_auto_send_message&&setTimeout((()=>{const e=Je.querySelector('iframe[name="intercom-messenger-frame"]');if(e){var t;const n=null===(t=e.contentWindow)||void 0===t?void 0:t.document.querySelector(".intercom-composer-send-button");n&&n.click()}}),t.auto_send_timeout)):window.Intercom("show")},S=s("ft-snapengage-style"),x=()=>{window.SnapEngage&&window.SnapEngage.hideButton(),S.innerHTML="#designstudio-button { display: none !important;}",Je.body.appendChild(S)},T=e=>{let{additionalParameters:t,email:n,isCurrentTabPrimary:i,name:o,question:r}=e;if(n&&window.SnapEngage.setUserEmail(n,!0),o&&window.SnapEngage.setUserName(o),window.SnapEngage&&window.SnapEngage.showButton(),S.innerHTML="#designstudio-button { display: block !important;}",Je.body.appendChild(S),i){var s;window.SnapEngage.startLink();const e=null===(s=Je.getElementById("designstudio-iframe").contentWindow)||void 0===s?void 0:s.document.getElementById("message-textarea");e&&r&&(e.value=r),null!==t&&void 0!==t&&t.transcript&&window.SnapEngage&&window.SnapEngage.setCallback("ChatMessageReceived",(function(e){const n=()=>{let e=!0;try{e&&(e=!1,window.SnapEngage.sendTextToChat(null===t||void 0===t?void 0:t.transcript))}catch(i){e=!0,window.SnapEngage.setCallback("ChatMessageReceived",""),setTimeout(n,5e3)}},i=null===t||void 0===t?void 0:t.bot_alias_list;i&&e&&!i.includes(e)&&(n(),window.SnapEngage.setCallback("ChatMessageReceived",""))}))}window.SnapEngage&&window.SnapEngage.setCallback("Close",(function(){x(),window.Forethought("widget","show")}))},A=e=>{let{email:t,isCurrentTabPrimary:n,name:i,question:o}=e;window.drift.on("ready",(function(){const e={};t&&(e.email=t),i&&(e.nickname=i),window.drift.api.setUserAttributes(e)})),o&&n&&window.drift.api.goToNewConversation(o),window.drift&&window.drift.api.openChat()},L=(e,t)=>{(e=>{switch(e){case"hide":return void window.Forethought("widget","hide");case"minimize":return void window.Forethought("widget","close");default:;}})(e),E({...t,event:"forethoughtWidgetGenericHandoff"})},P=s("ft-brand-embassy-style"),z=e=>{let{autoStartSession:t,customFields:n,isCurrentTabPrimary:i,name:o,question:r}=e;if(o&&window.brandembassy("setCustomerName",o),n)for(const[s,a]of Object.entries(n))window.brandembassy("setCustomField",s,a);i&&(window.brandembassy("hideFirstSentMessage",!1),window.brandembassy("sendFirstMessageAutomatically",r)),P.innerHTML="#be-frame {display: block !important;}",Je.body.appendChild(P),window.brandembassy("openChatWindow"),t&&i&&window.brandembassy("autoStartSession")},R=s("ft-gorgias-style"),M=e=>{let{isCurrentTabPrimary:t,question:n}=e;R.innerHTML="#gorgias-chat-container {display: block !important;}",Je.body.appendChild(R),window.GorgiasChat.hideChat(!1),window.GorgiasChat.open(),t&&window.GorgiasChat.sendMessage(n)},D=s("ft-freshchat-style"),O=e=>{let{conversationProperties:t,email:n,firstName:i,forethoughtConversationID:o,isCurrentTabPrimary:s,lastName:a,question:c,tags:d}=e;const l={},u={replyText:""};i&&(l.firstName=i),a&&(l.lastName=a),n&&(l.email=n),Object.keys(l).length&&window.fcWidget.user.setProperties(l),s&&((e=>{window.fcWidget.on("message:sent",(function(t){r("freshchat",t.message.conversationAlias,e,!1,!0),window.fcWidget.off("message:sent")}))})(o),d&&window.fcWidget.setTags(d),t&&Object.keys(t).length&&window.fcWidget.conversation.setConversationProperties({...t}),u.replyText=c),D.innerHTML="",Je.body.appendChild(D),window.fcWidget.open(u)},N=s("ft-salesforce-messaging-style"),q=()=>{N.innerHTML="",Je.body.appendChild(N)},W=async e=>{let{clearSessionBeforeHandoff:t,forethoughtConversationID:n,hiddenFields:i,isCurrentTabPrimary:o,visibleFields:r}=e;if(o){t&&await window.embeddedservice_bootstrap.userVerificationAPI.clearSession(),window.embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields(i),Object.keys(r).length&&window.embeddedservice_bootstrap.prechatAPI.setVisiblePrechatFields(r);try{q(),await window.embeddedservice_bootstrap.utilAPI.launchChat()}catch(s){Ge({consoleError:!0,conversationId:null!==n&&void 0!==n?n:void 0,error:"Error calling window.embeddedservice_bootstrap.utilAPI.launchChat -- ".concat(s)}),(()=>{const e=Je.querySelector('#embeddedMessagingConversationButton:not([title="Minimize the chat window"])');e&&e.click()})(),(e=>{try{const e=Je.getElementById("embeddedMessagingFrame");if(e){var t;const i=e.contentDocument||(null===(t=e.contentWindow)||void 0===t?void 0:t.document);if(i){var n;const e=null===i||void 0===i||null===(n=i.querySelector("webruntime-app"))||void 0===n?void 0:n.querySelector("button.slds-button.minimizedButton");e&&e.click()}}}catch(s){Ge({consoleError:!0,conversationId:null!==e&&void 0!==e?e:void 0,error:"Error clicking Salesforce Messaging Iframe button -- ".concat(s)})}})(n),(()=>{var e;null===(e=Je.getElementById("esw-fab"))||void 0===e||e.click()})()}}else q()},F=s("ft-live-chat-style"),j=()=>{window.LiveChatWidget?window.LiveChatWidget.call("hide"):window.LC_API&&window.LC_API.hide_chat_window(),F.innerHTML="#chat-widget-container {display: none !important;}",Je.body.appendChild(F)},U=()=>{F.innerHTML="#chat-widget-container {display: block !important;}",Je.body.appendChild(F)},B=()=>{const e=window.LC_API;return!!e&&(!!e.is_loaded()&&(()=>{const e=window.LC_API;return!!e&&!!e.chat_running()&&(window.Forethought("widget","hide"),e.open_chat_window(),U(),!0)})())},H=async e=>{var t;let{additionalParameters:n,department:o,email:s,featureFlags:a,forethoughtConversationID:d,integration:l,isCurrentTabPrimary:h,name:g,question:f,widgetOption:_}=e;tt=f;const y=null===a||void 0===a?void 0:a.includes("next_avail_dept_routing"),S=null===a||void 0===a?void 0:a.includes("zendesk_department_verify_loop");switch(l){case"zendesk_messaging":const{authToken:e,customFieldsAndValues:a,ticketTags:N}=n,q=N.length>0,F=a.length>0;if(!window.zE)return V({error:"window.zE is undefined or Zendesk Messaging iframe is not found",integration:l,question:f,success:!1});window.Forethought("widget","hide"),p();try{e&&window.zE("messenger","loginUser",(function(t){t(e)})),q&&await window.zE("messenger:set","conversationTags",N),F&&await window.zE("messenger:set","conversationFields",a),window.zE("messenger:set","zIndex",9999999),window.zE("messenger","open")}catch(R){return V({customFields:a,error:I(R),integration:l,question:f,success:!1,ticketTags:N})}if(h){const e=navigator.language||"en-US";window.zE("messenger:set","locale","en-US"),((e,t)=>{let n=!0,i=0;const o=()=>{if(n&&i<=10){var r;if(n=!1,!e)return void t();const d=Je.querySelector('iframe[title="Messaging window"]'),l=null===d||void 0===d||null===(r=d.contentWindow)||void 0===r?void 0:r.document.querySelector('textarea[data-garden-id="forms.textarea"]');if(l){var s,a,c;null===(s=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value"))||void 0===s||null===(a=s.set)||void 0===a||a.call(l,e),l.dispatchEvent(new Event("change",{bubbles:!0}));const n=null===d||void 0===d||null===(c=d.contentWindow)||void 0===c?void 0:c.document.querySelector('button[data-garden-id="buttons.icon_button"][aria-label="Send message"]');n&&(n.click(),t())}else n=!0,i++,setTimeout(o,3e3)}else t()};o()})(f,(()=>{V({browserLanguage:e,customFields:a,integration:l,question:f,success:!0,ticketTags:N})})),window.zE("messenger:set","locale",e)}break;case"zendesk":const{chatTags:j,conversationIdUsedInPreviousSession:B="",ignoreAgentAvailability:H}=n,Y=()=>{window.zE&&B&&window.zE("webWidget","chat:removeTags",["ft-conversation-id_".concat(B)])};if(!window.zE)return V({chatTags:j,departmentReceived:o,departmentReceivedName:o,email:s,error:"window.zE is undefined",ignoreAgentAvailability:H,integration:l,name:g,question:f,success:!1});const Z=null===(t=Je.getElementById("launcher"))||void 0===t?void 0:t.parentElement;Z&&(Z.style.display="block");const G=S?await(async()=>{let e=[];try{const t=20,n=500;for(let i=0;i<t&&(await C(n),!(window.zE&&(e=window.zE("webWidget:get","chat:departments")||[],e.length>0)));++i);}catch(R){e=[]}return e})().then((e=>e.filter((e=>"online"===e.status)))):m().filter((e=>"online"===e.status));let J="";const K=parseInt(o),Q=isNaN(K)?null:K;if(Q){var E;const e=m();J=(null===e||void 0===e||null===(E=e.find((e=>e.id===Q)))||void 0===E?void 0:E.name)||""}else J=o;const $=G.some((e=>e.name===J));if(G.length){if(!y&&J&&!$)return V({chatTags:j,departmentReceived:o,departmentReceivedName:J,departments:m(),email:s,error:"Department is offline",ignoreAgentAvailability:H,integration:l,isReceivedDepartmentOnline:$,name:g,question:f,success:!1});try{Y(),window.zE("webWidget","open")}catch(R){return V({chatTags:j,departmentReceived:o,departmentReceivedName:J,departments:m(),email:s,error:R instanceof Error?R.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:H,integration:l,isReceivedDepartmentOnline:$,name:g,question:f,success:!1})}await new Promise((e=>{window.zE&&window.zE((async()=>{if(window.zE){if(g||s)try{window.zE.identify({email:s,name:g})}catch(R){return V({chatTags:j,departmentReceived:o,departmentReceivedName:J,departments:m(),email:s,error:R instanceof Error?R.message:"Unknown window.zE.identify({ email, name }) invocation error",ignoreAgentAvailability:H,integration:l,isReceivedDepartmentOnline:$,name:g,question:f,success:!1})}if(o&&$){const e=5,t=500,n=async()=>{try{for(let n=0;n<e;++n)if(await C(t),window.zE){const e=w();window.zE&&window.zE("webWidget","updateSettings",{webWidget:{chat:{departments:{select:J}}}}),i({event:"zendeskUpdateSettings",updateSettingsData:{department:J,departments:m(),error:"",executionNumber:n+1,isReceivedDeptOnline:$,isSent:!0,isSessionActive:e,timeOfTrackingEvent:Date.now(),...Q&&{departmentId:Q}}})}}catch(R){i({event:"zendeskUpdateSettings",updateSettingsData:{department:J,departments:m(),error:R instanceof Error?R.message:"Unknown window.zE(webWidget, updateSettings) invocation error",isReceivedDeptOnline:$,isSent:!1,timeOfTrackingEvent:Date.now(),...Q&&{departmentId:Q}}})}};await n()}try{j&&window.zE("webWidget","chat:addTags",j)}catch(R){return V({chatTags:j,departmentReceived:o,departmentReceivedName:J,departments:m(),email:s,error:R instanceof Error?R.message:"Unknown window.zE(webWidget, chat:addTags) invocation error",ignoreAgentAvailability:H,integration:l,isReceivedDepartmentOnline:$,name:g,question:f,success:!1})}p(),f&&h?setTimeout((()=>{try{var t,n;null===(t=(n=window).zE)||void 0===t||t.call(n,"webWidget","chat:send",f),e()}catch(R){V({chatTags:j,departmentReceived:o,departmentReceivedName:J,departments:m(),email:s,error:R instanceof Error?R.message:"Unknown window.zE('webWidget', 'chat:send', question) invocation error",ignoreAgentAvailability:H,integration:l,isReceivedDepartmentOnline:$,name:g,question:f,success:!1})}}),3e3):e()}}))})),V({chatTags:j,departmentReceived:o,departmentReceivedName:J,departments:m(),email:s,ignoreAgentAvailability:H,integration:l,isReceivedDepartmentOnline:$,name:g,question:f,success:!0})}else if(H){p();try{Y(),window.zE("webWidget","open"),window.zE((()=>{try{window.zE&&((g||s)&&window.zE.identify({email:s,name:g}),j&&window.zE("webWidget","chat:addTags",j),J&&window.zE("webWidget","updateSettings",{webWidget:{chat:{departments:{select:J}}}}),setTimeout((()=>{var e,t;f&&h&&(null===(e=(t=window).zE)||void 0===e||e.call(t,"webWidget","chat:send",f))}),3e3))}catch(R){return V({chatTags:j,departmentReceived:o,departmentReceivedName:J,departments:m(),email:s,error:R instanceof Error?R.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:H,integration:l,isReceivedDepartmentOnline:$,name:g,question:f,success:!1})}}))}catch(R){return V({chatTags:j,departmentReceived:o,departmentReceivedName:J,departments:m(),email:s,error:R instanceof Error?R.message:"Unknown window.zE(...) invocation error",ignoreAgentAvailability:H,integration:l,isReceivedDepartmentOnline:$,name:g,question:f,success:!1})}V({chatTags:j,departmentReceived:o,departmentReceivedName:J,departments:m(),email:s,ignoreAgentAvailability:H,integration:l,isReceivedDepartmentOnline:$,name:g,question:f,success:!0})}else V({chatTags:j,departmentReceived:o,departmentReceivedName:J,departments:m(),email:s,error:"All departments are offline",ignoreAgentAvailability:H,integration:l,isReceivedDepartmentOnline:$,name:g,question:f,success:!1});break;case"salesforce":const{extraPrechatFormDetails:X=[],manually_click_salesforce_button:ee=!1,manually_click_timeout:te=0,...ne}=n;if(!window.embedded_svc)return V({error:"window.embedded_svc is undefined",integration:l,manuallyClickSalesforceButton:ee,success:!1});const ie={};if(!nt){var k;if(null===(k=window.embedded_svc)||void 0===k||!k.addEventHandler)return V({error:"window.embedded_svc.addEventHandler is undefined",integration:l,manuallyClickSalesforceButton:ee,success:!1});window.embedded_svc.addEventHandler("afterDestroy",u),nt=!0}if(c(),window.Forethought("widget","hide"),h){const e={};if(g){const{firstName:t,lastName:n}=(e=>{const t=e.trim().replace(/\s{2,}/g," ").split(" "),n=t.length&&t[0]?t[0]:"";return{firstName:n,lastName:t.length>1?t.slice(1).join(" "):n}})(g);e.Name=g,e.FirstName=t,e.LastName=n}const t={extraPrechatFormDetails:X,prepopulatedPrechatFields:{Email:s,Subject:f,...e,...ne}};if(ie.startChatFields={...t},ee){var x;let e=!0;if(null===(x=window.embedded_svc)||void 0===x||!x.addEventHandler)return V({error:"window.embedded_svc.addEventHandler is undefined",integration:l,manuallyClickSalesforceButton:ee,success:!1});window.embedded_svc.addEventHandler("afterMaximize",(()=>{setTimeout((()=>{if(e){var n;if(null===(n=window.embedded_svc.liveAgentAPI)||void 0===n||!n.startChat)return V({error:"window.embedded_svc.liveAgentAPI.startChat is undefined",integration:l,manuallyClickSalesforceButton:ee,success:!1});window.embedded_svc.liveAgentAPI.startChat({...t}).then((()=>{e=!1}))}}),te)}));const n=document.querySelector("div.embeddedServiceHelpButton button");n?(n.click(),V({...ie,integration:l,manuallyClickSalesforceButton:ee,success:!0})):V({...ie,error:"Salesforce chat button is not found",integration:l,manuallyClickSalesforceButton:ee,success:!1})}else{var P;if(null===(P=window.embedded_svc.liveAgentAPI)||void 0===P||!P.startChat)return V({error:"window.embedded_svc.liveAgentAPI.startChat is undefined",integration:l,manuallyClickSalesforceButton:ee,success:!1});window.embedded_svc.liveAgentAPI.startChat({...t}),V({...ie,integration:l,manuallyClickSalesforceButton:ee,success:!0})}}break;case"kustomer":if(!window.Kustomer)return V({customFields:{...n.customFields},error:"window.Kustomer is undefined",integration:l,question:f,success:!1});const oe=window.Kustomer.isChatAvailable();if(void 0===oe)return V({customFields:{...n.customFields},error:"Kustomer.isChatAvailable() returned undefined",integration:l,question:f,success:!1});const{availability:re}=oe;if("disabled"===re||"hidden"===re)return V({customFields:{...n.customFields},error:"Chat is ".concat(re),integration:l,question:f,success:!1,widgetAvailability:re});if(h)try{s&&window.Kustomer.describeCustomer({attributes:{emails:[s]}}),window.Kustomer.createConversation({customAttributes:{...n.customFields},message:f||"Conversation via Forethought",...n.assistantId?{assistantId:n.assistantId}:{}},(function(e,t){if(t||!e)return V({customFields:{...n.customFields},error:I(t),integration:l,question:f,success:!1});{const t=!0,i=!0;r(l,e.conversationId,d,t,i),v.innerHTML="#kustomer-ui-sdk-iframe { display: block !important;}",Je.body.appendChild(v),window.Forethought("widget","hide"),V({customFields:{...n.customFields},integration:l,question:f,success:!0,widgetAvailability:re})}}))}catch(D){return V({customFields:{...n.customFields},error:I(D),integration:l,question:f,success:!1})}break;case"intercom":if(!window.Intercom)return V({autoSendConfig:n.autoSendConfig,email:s,error:"window.Intercom is undefined",identityVerificationEnabled:n.identityVerificationEnabled,integration:l,name:g,question:f,success:!1,userid:n.userid});try{b({autoSendConfig:n.autoSendConfig,email:s,identityVerificationEnabled:n.identityVerificationEnabled,isCurrentTabPrimary:h,name:g,question:f,userid:n.userid})}catch(D){return V({autoSendConfig:n.autoSendConfig,email:s,error:I(D),identityVerificationEnabled:n.identityVerificationEnabled,integration:l,name:g,question:f,success:!1,userid:n.userid})}V({autoSendConfig:n.autoSendConfig,email:s,identityVerificationEnabled:n.identityVerificationEnabled,integration:l,name:g,question:f,success:!0,userid:n.userid});break;case"snap_engage":if(!window.SnapEngage||!window.SnapEngage.startLink||!window.SnapEngage.sendTextToChat)return V({additionalParameters:n,email:s,error:"window.SnapEngage is undefined, or is missing necessary functions",integration:l,name:g,question:f,success:!1});try{T({additionalParameters:n,email:s,isCurrentTabPrimary:h,name:g,question:f})}catch(D){return V({additionalParameters:n,email:s,error:I(D),integration:l,name:g,question:f,success:!1})}V({additionalParameters:n,email:s,integration:l,name:g,question:f,success:!0});break;case"drift":if(!window.drift)return V({email:s,error:"window.drift is undefined",integration:l,name:g,question:f,success:!1});try{A({email:s,isCurrentTabPrimary:h,name:g,question:f})}catch(D){return V({email:s,error:I(D),integration:l,name:g,question:f,success:!1})}V({email:s,integration:l,name:g,question:f,success:!0});break;case"generic":try{L(_,{...n}),V({...n,integration:l,success:!0,widgetOption:_},!1)}catch(D){V({...n,error:I(D),integration:l,success:!1,widgetOption:_},!1)}break;case"brand_embassy":const{autoStartSession:se,customFields:ae}=n;if(!window.brandembassy)return V({autoStartSession:se,customFields:ae,error:"window.brandembassy is undefined",integration:l,name:g,question:f,success:!1});try{z({autoStartSession:se,customFields:ae,isCurrentTabPrimary:h,name:g,question:f})}catch(D){return V({autoStartSession:se,customFields:ae,error:I(D),integration:l,name:g,question:f,success:!1})}V({autoStartSession:se,customFields:ae,integration:l,name:g,question:f,success:!0});break;case"gorgias":if(!window.GorgiasChat)return V({error:"window.GorgiasChat is undefined",integration:l,question:f,success:!1});try{M({isCurrentTabPrimary:h,question:f})}catch(D){return V({error:I(D),integration:l,question:f,success:!1})}V({integration:l,question:f,success:!0});break;case"freshchat":{const{conversationProperties:e,firstName:t,lastName:i,tags:o}=n;if(!window.fcWidget)return V({conversationProperties:e,email:s,error:"window.fcWidget is not found",firstName:t,forethoughtConversationID:d,integration:l,lastName:i,question:f,success:!1,tags:o});try{O({conversationProperties:e,email:s,firstName:t,forethoughtConversationID:d,isCurrentTabPrimary:h,lastName:i,question:f,tags:o})}catch(D){return V({conversationProperties:e,email:s,error:I(D),firstName:t,forethoughtConversationID:d,integration:l,lastName:i,question:f,success:!1,tags:o})}V({conversationProperties:e,email:s,firstName:t,forethoughtConversationID:d,integration:l,lastName:i,question:f,success:!0,tags:o});break}case"salesforce_messaging":{const{clearSessionBeforeHandoff:e=!1,hiddenFields:t={},visibleFields:i={}}=n;if(!window.embeddedservice_bootstrap)return V({clearSessionBeforeHandoff:e,error:"window.embeddedservice_bootstrap is undefined",hiddenFields:t,integration:l,question:f,success:!1,visibleFields:i});try{await W({clearSessionBeforeHandoff:e,forethoughtConversationID:d,hiddenFields:t,isCurrentTabPrimary:h,visibleFields:i})}catch(D){return V({error:I(D),hiddenFields:t,integration:l,question:f,success:!1,visibleFields:i})}V({hiddenFields:t,integration:l,question:f,success:!0,visibleFields:i});break}case"live_chat":if(void 0===window.LiveChatWidget&&void 0===window.LC_API)return V({email:s,error:"both window.LiveChatWidget and window.LC_API are undefined",integration:"live_chat",name:g,question:f,success:!1});try{window.LiveChatWidget?(e=>{let{email:t,isCurrentTabPrimary:n,name:i,question:o}=e;window.LiveChatWidget&&(U(),i&&window.LiveChatWidget.call("set_customer_name",i),t&&window.LiveChatWidget.call("set_customer_email",t),n&&(window.LiveChatWidget.call("set_session_variables",{"Forethought Transcript":o}),window.LiveChatWidget.call("maximize")))})({email:s,isCurrentTabPrimary:h,name:g,question:f}):window.LC_API&&(e=>{let{email:t,isCurrentTabPrimary:n,name:i,question:o}=e;if(window.LC_API&&(U(),i&&window.LC_API.set_visitor_name(i),t&&window.LC_API.set_visitor_email(t),n)){const e=[{name:"Forethought Transcript",value:o}];window.LC_API.set_custom_variables(e),window.LC_API.open_chat_window()}})({email:s,isCurrentTabPrimary:h,name:g,question:f})}catch(D){return V({email:s,error:I(D),integration:"live_chat",name:g,question:f,success:!1})}V({email:s,integration:"live_chat",name:g,question:f,success:!0});break;default:V({error:"Unknown integration: ".concat(l),integration:l,question:f,success:!1})}},V=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];console.log("Forethought ".concat(e.integration," handoff"),e),i({event:"handoffStatus",handoffFailureMessage:e.error,hideWidget:t,success:e.success});const n={event:"forethoughtWidgetIntegrationHandoffCompleted",handoffData:e,success:e.success};window.postMessage(n),i({event:"handoffTrackingEvent",handoffData:e})};window.addEventListener("message",(e=>{const t=e.data,n=null===t||void 0===t?void 0:t.data,i=null===t||void 0===t?void 0:t.method;"liveagent.restored"===i&&window.embedded_svc.liveAgentAPI.browserSessionInfo.activeChatSessions&&window.Forethought("widget","hide"),"liveagent.initialized"===i&&(c(),window.Forethought("widget","hide")),"chasitorChatEstablished"===(null===n||void 0===n?void 0:n.event)&&l()})),window.addEventListener("message",(e=>{if((e=>Boolean((e.origin===n||"*"===n)&&e.data))(e))return"forethoughtWidgetLoaded"===e.data.event?(window.zE?e.data.isLiveChatMode?g():k((()=>f(window.zE))):g(),window.LC_API?k(B).then((e=>{e||j()})):j(),d(),v.innerHTML="#kustomer-ui-sdk-iframe { display: none !important;}",Je.body.appendChild(v),"false"!==et&&(window.Intercom&&window.Intercom("hide"),_.innerHTML='\n      .intercom-launcher {display: none !important;}\n      .intercom-messenger-frame {display: none !important;}\n      .intercom-lightweight-app {display: none !important;}\n      .intercom-launcher-frame {display: none !important;}\n      [class*="intercom-with-namespace-"] span[data-testid="active-notifications"]{display: none !important;}\n      iframe[name="intercom-borderless-frame"] { display: none !important; }\n      iframe[name="intercom-notifications-frame"] { display: none !important; }\n    ',Je.body.appendChild(_)),x(),window.drift&&window.drift.hide(),P.innerHTML="#be-frame {display: none !important;}",Je.body.appendChild(P),R.innerHTML="#gorgias-chat-container {display: none !important;}",Je.body.appendChild(R),D.innerHTML="\n      #fc_frame {display: none !important;}\n      freshchat-widget {display: none !important;}\n    ",Je.body.appendChild(D),N.innerHTML="\n      #embedded-messaging {display: none !important;}\n      #embedded-service {display: none !important;}\n    ",void Je.body.appendChild(N)):void("forethoughtWidgetIntegrationHandoff"!==e.data.event||H(e.data))}))},ot="forethought-zopim",rt=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(((t,i)=>{if(!window.zChat){const t=new Error("window.zChat is not defined");return dt({args:n,error:t,event:"forethoughtZopimCallback",function:e,response:void 0}),i(t)}window.zChat[e](...n,((i,o)=>{i&&"endChat"!==e&&Ge({consoleError:!0,error:"Zopim One Chat error ocurred while calling ".concat(e," -- ").concat(i)}),dt({args:n,error:i,event:"forethoughtZopimCallback",function:e,response:o}),t()}))}))},st=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];window.clearTimeout(t),t=window.setTimeout((()=>{e(...o)}),n)}}((e=>{let{accountKey:t,postInit:n,setupListeners:i}=e;if(i(),window.zChat&&"connected"!==window.zChat.getConnectionStatus()){var o,r,s,a;const e={account_key:t,suppress_console_error:!1};null!==(o=window.zESettings)&&void 0!==o&&null!==(r=o.webWidget)&&void 0!==r&&null!==(s=r.authenticate)&&void 0!==s&&null!==(a=s.chat)&&void 0!==a&&a.jwtFn&&(e.authentication={jwt_fn:window.zESettings.webWidget.authenticate.chat.jwtFn}),window.zChat.init(e)}n()}),500);let at;const ct="*",dt=e=>{const t=document.getElementById(o);var n;t?null===(n=t.contentWindow)||void 0===n||n.postMessage(e,ct):window.postMessage(e)},lt=async e=>{let{conversationId:t,conversationIdUsedInPreviousSession:n,integrationFields:i,liveChatWidgetComponent:o}=e;if(!o.isSent){const e=((e,t)=>{const n=null===(e=i.department_with_id)||void 0===e?void 0:e.id,o=null===(t=i.department_with_id)||void 0===t?void 0:t.name;return n&&!isNaN(parseInt(n))?parseInt(n):o&&!isNaN(parseInt(o))?parseInt(o):void 0})(),r=[...i.chat_tags||[],"ft-conversation-id_".concat(t)],s=()=>{var e;return"zendesk"!==o.component_fields.integration_config.integration||null===(e=o.component_fields.integration_config.integration_fields)||void 0===e||!e.ignore_agent_availability};at&&clearTimeout(at),at=setTimeout((async()=>{try{await async function(e){let{callback:t,initialDelayMs:n=0,intervalMs:i=1e3,numRetries:o=3}=e;return new Promise(((e,r)=>{let s=0;const a=async()=>{try{const n=await t();e(n)}catch(n){s++,s<=o?(console.log("retryFunction failed, attempting retry:",n),setTimeout(a,i)):(console.log("retryFunction failed:",n),r(n))}};setTimeout((async()=>{await a()}),n)}))}({callback:async()=>{var a;if("connected"!==(null===(a=window.zChat)||void 0===a?void 0:a.getConnectionStatus()))throw new Error("Zopim SDK not connected");if((e=>!!window.zChat&&window.zChat.isChatting()&&window.zChat.getChatLog().some((t=>"chat.msg"===t.type&&t.msg===e.component_fields.customer_facing_transcript)))(o))return void Ge({consoleError:!0,conversationId:t,error:new Error("Zopim chat already in progress")});if(e&&s()){if(!window.zChat.getAllDepartments().length)throw new Error("Cannot fetch departments.");const t=window.zChat.getDepartment(e);if(!t){const t={error:"Department ".concat(e," not found"),event:"forethoughtZopimFailure"};return void dt(t)}if("offline"===t.status){const t={error:"Department ".concat(e," is offline"),event:"forethoughtZopimFailure"};return void dt(t)}}dt({event:"forethoughtZopimPending"}),await rt("endChat",{clear_dept_id_on_chat_ended:!0}),e&&(await rt("clearVisitorDefaultDepartment"),await rt("setVisitorDefaultDepartment",e)),await rt("removeTags",["ft-conversation-id_".concat(n)]),await rt("addTags",r),await rt("setVisitorInfo",{display_name:i.visitor_name||"",email:i.visitor_email||""}),await rt("sendChatMsg",o.component_fields.customer_facing_transcript);const c={event:"forethoughtSendTrackingEvent",trackingEvent:{conversation_id:t,department_id:e,display_name:i.visitor_name,email:i.visitor_email,event_type:"widget-customer-handoff",integration:"zendesk-zopim-live-chat",success:!0,tags:r}};dt(c);dt({event:"forethoughtLiveChatSetStepSent"})},initialDelayMs:0,intervalMs:500,numRetries:20})}catch(a){const e="".concat(a instanceof Error?a.message:a);return void dt({error:e,event:"forethoughtZopimFailure"})}}),1e3)}},ut=()=>{const e=document.getElementById(o),t=t=>{var n;null===(n=e.contentWindow)||void 0===n||n.postMessage({event:"forethoughtZopimAgentUpdate",zopimData:t},ct)},n=t=>{var n,i;null===(n=e.contentWindow)||void 0===n||n.postMessage({event:"forethoughtZopimChat",zopimAgents:(null===(i=window.zChat)||void 0===i?void 0:i.getServingAgentsInfo())||[],zopimData:t},ct)},i=t=>{var n;null===(n=e.contentWindow)||void 0===n||n.postMessage({event:"forethoughtZopimConnectionUpdate",zopimData:t},ct)},r=t=>{var n;null===(n=e.contentWindow)||void 0===n||n.postMessage({error:t,event:"forethoughtZopimError"},ct)},s=()=>{var e,o,s,a;null===(e=window.zChat)||void 0===e||e.on("agent_update",t),null===(o=window.zChat)||void 0===o||o.on("chat",n),null===(s=window.zChat)||void 0===s||s.on("connection_update",i),null===(a=window.zChat)||void 0===a||a.on("error",r)};window.addEventListener("message",(e=>{var o;switch(e.data.event){case"forethoughtZopimInit":const{conversationId:c,conversationIdUsedInPreviousSession:d,integrationFields:l,liveChatWidgetComponent:u}=e.data;if(window.zChat)st({accountKey:l.account_key,postInit:()=>lt({conversationId:c,conversationIdUsedInPreviousSession:d,integrationFields:l,liveChatWidgetComponent:u}),setupListeners:s});else{var a;const e=document.createElement("script");e.id=ot,e.src="https://dev.zopim.com/web-sdk/1.11.2/web-sdk.js",e.fetchPriority="high",e.onload=()=>{st({accountKey:l.account_key,postInit:()=>lt({conversationId:c,conversationIdUsedInPreviousSession:d,integrationFields:l,liveChatWidgetComponent:u}),setupListeners:s})};const t=null===(a=document.currentScript)||void 0===a?void 0:a.getAttribute("nonce");t&&(e.nonce=t),document.body.appendChild(e)}break;case"forethoughtZopimRemove":(()=>{var e,o,s,a;null===(e=window.zChat)||void 0===e||e.un("agent_update",t),null===(o=window.zChat)||void 0===o||o.un("chat",n),null===(s=window.zChat)||void 0===s||s.un("connection_update",i),null===(a=window.zChat)||void 0===a||a.un("error",r)})(),null===(o=document.getElementById(ot))||void 0===o||o.remove();break;case"forethoughtZopimApplyFunction":if(window.zChat)if("sendFile"===e.data.functionName)try{const t=e.data.args[0],n=e.data.args[1].split(",")[1];e.data.args[0]=ht(t,n),rt(e.data.functionName,e.data.args[0],...e.data.args.slice(2))}catch(e){break}else rt(e.data.functionName,...e.data.args);else{const t=new Error("window.zChat is not defined");dt({args:e.data.args,error:t,event:"forethoughtZopimCallback",function:e.data.functionName,response:void 0})}}}))},ht=(e,t)=>{const n=atob(t),i=new Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);const o=new Uint8Array(i),r=new Blob([o],{type:e.type});return new File([r],e.name,{type:e.type})};Array.from=t(),function(e){const t=window.document,n=t.currentScript;if(!n)throw new Error("FT: Could not find embed script");const r=n.getAttribute("data-api-key"),s=(()=>{const e=window.document.currentScript;if(!e)throw new Error("FT: Could not find embed script");const t=e.getAttribute("offset-x")||"0px",n="".concat("0px"===t?6:30,"px");return window.matchMedia("(min-width: ".concat(481,"px) and (max-width: calc(").concat(688,"px + ").concat(t," - ").concat(n,"))"))})();if(!r)return;const a=n.getAttribute("full-screen"),c=n.getAttribute("hidden"),d="true"===n.getAttribute("data-builder-preview"),l="true"===n.getAttribute("data-solve-config-preview"),u=n.getAttribute("offset-x")||"0px",h=n.getAttribute("offset-y")||"0px",g=n.getAttribute("data-workflow-version"),p=null===(e=n.getAttribute("src"))||void 0===e?void 0:e.replace("embed.js",""),m={};Array.from(n.attributes).forEach((e=>{const t=e.nodeValue,n="null"===t;m[e.nodeName]=n?null:t}));const f=function(){var e;if(t.querySelector("#forethought-chat"))return void console.warn("Detected duplicate Forethought embed script. If you want to initialize the widget with new parameters, you need to remove the old Forethought iframe first.");const f=t.createElement("iframe");f.setAttribute("id",o),f.setAttribute("name","Virtual Assistant Chat"),f.setAttribute("title","Virtual Assistant Chat"),f.setAttribute("allowfullscreen","allowfullscreen"),f.setAttribute("mozallowfullscreen","mozallowfullscreen"),f.setAttribute("msallowfullscreen","msallowfullscreen"),f.setAttribute("oallowfullscreen","oallowfullscreen"),f.setAttribute("webkitallowfullscreen","webkitallowfullscreen"),f.setAttribute("sandbox","allow-scripts allow-popups allow-top-navigation-by-user-activation allow-same-origin allow-popups-to-escape-sandbox allow-downloads allow-top-navigation");const v=Object.fromEntries(Array.from(n.getAttributeNames(),(e=>[e,n.getAttribute(e)||""]))),S=new URLSearchParams(v);f.setAttribute("src",p+"?v=2#".concat(S)),_(f),t.body.appendChild(f);const E=p?y(new URL(p).origin):"*",C=e=>{var t;null===(t=f.contentWindow)||void 0===t||t.postMessage(e,E)};function k(e){let{height:t,maxWidth:n,width:i}=e;_(f,{height:t,maxWidth:n,width:i})}function I(){k({height:"100%",width:"calc(280px + ".concat(48,"px)")})}function A(){const e="large"===i.size||"floating_bar"===i.launchStyle?640:400;if(d)t=f,n={maxWidth:"".concat(e,"px")},_(t,{borderRadius:"12px 0 0 12px",bottom:"0",height:"calc(100% - 69px)",maxHeight:"initial",right:"0",width:"100%",zIndex:"1199",...n});else{const t="".concat(e+48,"px");k({height:"0px"===h?"large"===i.size?"100%":"calc(90% - ".concat(h," - ").concat(48,"px)"):"calc(100% - ".concat(h," + ").concat(24,"px)"),width:"large"===i.size&&s.matches?"0px"===u?"calc(100% - ".concat(u," + ").concat(6,"px)"):"calc(100% - ".concat(u," + ").concat(30,"px)"):t})}var t,n}const L=()=>{f.hidden=!0},P=()=>{const e=x.matches,t=T;i.isOpen&&e?C({event:"forethoughtWidgetScreenSizeEvent",isMobile:!0,isSmallScreen:!1}):!i.isOpen||e||d||C({event:"forethoughtWidgetScreenSizeEvent",isMobile:!1,isSmallScreen:t.matches})},z=()=>{if(!i.isViewingImage)if(P(),i.isOpen){x.matches?b(f):A()}else"0"===i.closedWidgetDimensions.width?I():k({...i.closedWidgetDimensions,..."floating_bar"===i.launchStyle?{maxWidth:"640px",width:"90%"}:{}})},R=()=>{f.hidden=!1,i.isOpen?C({action:"showIframeOpen"}):C({action:"showIframe"})},M=()=>window.document.getElementById(o),D=()=>{var e,t;return{offsetLeft:(null===(e=window.visualViewport)||void 0===e?void 0:e.offsetLeft)||0,offsetTop:(null===(t=window.visualViewport)||void 0===t?void 0:t.offsetTop)||0}};window.addEventListener("message",(e=>{var t;if(t=e,Boolean((t.origin===E||"*"===E)&&t.data))switch(e.data.event){case"hideSolveWidget":L();break;case"showSolveWidget":R();break;case"hideIframeWidget":M()&&L();break;case"showIframeWidget":M()&&R();break;case"forethoughtWidgetOpened":i.isOpen=!0,z();break;case"forethoughtWidgetClosed":i.isOpen=!1;break;case"forethoughtWidgetStartedInitializing":const t=x.matches,n=T;t?C({event:"forethoughtWidgetScreenSizeEvent",isMobile:!0,isSmallScreen:!1}):t||C({event:"forethoughtWidgetScreenSizeEvent",isMobile:!1,isSmallScreen:n.matches}),"true"===a&&C({action:"openWidget",mechanism:"full-screen-true"}),c&&L(),C({API_KEY:r,event:"forethoughtWidgetInitEvent",href:window.location.href,isBuilderPreview:d,isSolveConfigPreview:l,origin:w(),rawParams:m,widgetInitMethod:"script",workflowVersion:g}),P();break;case"forethoughtWidgetLoaded":i.isOpen=e.data.isOpen,i.size=e.data.size,i.placement=e.data.placement,i.launchStyle=e.data.launchStyle,z(),"function"===typeof x.addEventListener?(x.addEventListener("change",z),s.addEventListener("change",z),T.addEventListener("change",z)):(x.addListener(z),s.addListener(z),T.addListener(z));break;case"forethoughtWidgetResize":if(i.isOpen)return;const{height:o,width:u}=e.data.dimensions;o&&u&&(i.closedWidgetDimensions={height:o,width:u},k({...i.closedWidgetDimensions,..."floating_bar"===i.launchStyle?{maxWidth:"640px",width:"90%"}:{}}));break;case"forethoughtWidgetResizeToMaximumValues":I();break;case"forethoughtWidgetViewImage":e.data.open?(i.isViewingImage=!0,b(f)):(i.isViewingImage=!1,z())}})),null===(e=window.visualViewport)||void 0===e||e.addEventListener("scroll",(()=>{C({event:"forethoughtSetVisualViewport",payload:D()})})),window.Forethought=(e,t,n)=>{if("widget"===e){if("open"===t&&C({action:"openWidget",mechanism:"js-api-widget-open"}),"close"===t&&C({action:"closeWidget"}),"hide"===t&&L(),"show"===t&&R(),"triggerEventComplete"===t){const e=null===n||void 0===n?void 0:n.identifier,i=(null===n||void 0===n?void 0:n.payload)||{};if(e)C({event:t,identifier:e,payload:i});else{const e="Event name is required at data.identifier";C({event:"forethoughtSendConversationAlert",requestData:{alert_type:"trigger-event-step",description:e,priority:"P4",teams:["Implementation Engineers"]}}),console.error("TRIGGER EVENT ERROR - ".concat(e))}}var i;if("clearLocalData"===t&&C({action:"clearLocalData"}),"launchQuery"===t)"string"!==typeof(null===n||void 0===n||null===(i=n.payload)||void 0===i?void 0:i.query)?Ge({consoleError:!0,error:"LAUNCH QUERY ERROR - data param must be initial query string"}):n.payload.query.trim()?C({action:"launchQuery",payload:n.payload}):Ge({consoleError:!0,error:"LAUNCH QUERY ERROR - data param must contain non whitespace characters"});"showProactivePrompt"===t&&C({action:"showProactivePrompt"}),"hideProactivePrompt"===t&&C({action:"hideProactivePrompt"})}},it(),ut()},w=function(){try{return new URL(window.location.origin).origin}catch{return""}};"complete"===t.readyState||"interactive"===t.readyState?f():t.addEventListener("DOMContentLoaded",f)}()})()})();
//# sourceMappingURL=embed.js.map